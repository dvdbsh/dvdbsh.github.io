<!DOCTYPE html>
<html>
<head>
  <title>Timer</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Cooking Timer</title>
  <link rel="stylesheet" type="text/css" href="main.css">
  <link rel="shortcut icon" type="image/png" href="https://res.cloudinary.com/di8j84ent/image/upload/v1690128995/New_Project_-_2023-07-23T121618.521_ybqq6l.png"/>
  <link rel="apple-touch-icon" type="image/png" https://res.cloudinary.com/di8j84ent/image/upload/v1690128995/New_Project_-_2023-07-23T121618.521_ybqq6l.png"/>
  <link rel="manifest" href="manifest.json">
</head>
<body>

  <div class="wrapper">
    <div class="rotate-image"></div>

    <div class="grid-container">
      <button class="timer-button-1" data-time="40" onclick="startTimer(this)"></button>
      <button class="timer-button-2" data-time="60" onclick="startTimer(this)"></button>
      <button class="timer-button-3" data-time="90" onclick="startTimer(this)"></button>
      <button class="timer-button-4" data-time="120" onclick="startTimer(this)"></button>
    </div>
  </div>
  
  <footer>
    Big shoutout to the awesome folks over at the original <i>Sea of Chefs</i> website for inspiring these cool timers. Most of the UI images from <a href="http://www.seaofthieves.com">www.seaofthieves.com</a>.<br>Â©Microsoft 2023. Microsoft, Rare, the Rare logo, and Sea of Thieves are trademarks of the Microsoft group of companies. Happy sailing! ðŸŽ‰
  </footer>

  <script>
    function startTimer(button) {
      if (button.classList.contains("orange-button")) {
        stopTimer(button);
      } else {
        button.classList.remove("timer-button-1", "timer-button-2", "timer-button-3", "timer-button-4");
        button.classList.add("orange-button");
        let remainingTime = parseInt(button.getAttribute("data-time"));
        button.innerText = remainingTime;

        let interval = setInterval(function() {
          remainingTime--;
          button.innerText = remainingTime;

          if (remainingTime === 0) {
            stopTimer(button, interval);
            button.innerText = "âœ…";
          }
        }, 1000);

        // Save the interval reference as a custom attribute on the button
        button.intervalRef = interval;
      }
    }

    function stopTimer(button) {
      clearInterval(button.intervalRef); // Stop the interval associated with this button
      button.innerText = ''; // Clear the text
      button.classList.remove("orange-button");
      // Restore the original style class based on data-time attribute
      const time = parseInt(button.getAttribute("data-time"));
      if (time === 40) {
        button.classList.add("timer-button-1");
      } else if (time === 60) {
        button.classList.add("timer-button-2");
      } else if (time === 90) {
        button.classList.add("timer-button-3");
      } else if (time === 120) {
        button.classList.add("timer-button-4");
      }
    }
  </script>

</body>
</html>
