<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="format-detection" content="telephone=no">
  <meta name="theme-color" content="#006241">
  <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/di8j84ent/image/upload/v1689457077/contacticon_pzou6m.png">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">
  <script src="https://unpkg.com/feather-icons@4.28.0"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #f9f9f9;
    }

    .app-header {
      display: flex;
      align-items: center;
      padding-top: 16px;
      padding-left: 16px;
      background-color: #006241;
      color: #fff;
    }

    .app-header h1 {
      font-size: 30px;
      font-weight: 600;
      margin: 0;
      padding-top: 10px;
    }

    .contact-list {
      padding: 0;
      list-style: none;
      margin: 0;
    }

    .contact-section-heading {
      font-size: 14px;
      color: #555;
      font-weight: 600;
      padding: 10px;
      background-color: #f2f0eb;
    }

    .contact-item {
      display: flex;
      align-items: center;
      padding: 10px;
      background-color: #fff;
      border-bottom: 1px solid #f2f0eb;
      cursor: pointer;
    }

    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .contact-info {
      flex-grow: 1;
    }

    .contact-name {
      font-size: 18px;
      font-weight: 500;
      color: #222;
    }

    .contact-position {
      font-size: 14px;
      font-weight: 400;
      color: #555;
    }

    .circle-buttons {
      display: flex;
      align-items: center;
    }

    .circle-button {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-left: 8px;
      padding: 4px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 0.2s;
    }

    .circle-button:hover {
      background-color: #f2f0eb;
    }

    .circle-button svg {
      stroke: #00754a;
      stroke-width: 1.5;
    }

    .blank-space {
      height: 100px;
      background-color: #f9f9f9;
    }

    .custom-popup {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      display: flex;
      align-items: center;
width:90%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      z-index: 9999;
    }

    .custom-popup-content {
      flex-grow: 1;
      margin-right: 0px;
    }

    .custom-popup-button {
      background-color: #006241;
      width:20px;
      height:20px;
      color: #fff;
      border: none;
      border-radius: 50%;
      padding: 5px;
      margin-left:10px;
      cursor: pointer;
    }
  </style>
  <title>Partners</title>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then(registration => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(error => {
          console.error('Service Worker registration failed:', error);
        });
    });
  }

  // Set the contact's avatar using DiceBear API
  function setContactAvatar(name, phoneNumber) {
    const lastFourDigits = phoneNumber.slice(-4) + (phoneNumber);
    const avatar = document.createElement('img');
    avatar.classList.add('avatar');
    avatar.src = `https://api.dicebear.com/6.x/thumbs/svg?seed=${lastFourDigits}&scale=70&backgroundColor=1e3932,006241,00754a,d4e9e2&shapeColor=eed350,dd92c0,f0cdbc,d3705a,f0e0b0,4c9f87,4ca06f,c0d48b,dc714e,edc4c9,d3af5a,92d35a,d7c4ed,edd9c4,50eee8,437dc8`;
    avatar.alt = 'avatar';

    return avatar;
  }

  // Create a contact item
  function createContactItem(name, phoneNumber, position) {
    const contactItem = document.createElement('li');
    contactItem.classList.add('contact-item');

    const avatar = setContactAvatar(name, phoneNumber);
    const contactInfo = document.createElement('div');
    contactInfo.classList.add('contact-info');

    const contactName = document.createElement('div');
    contactName.classList.add('contact-name');
    contactName.innerText = name;

    const contactPosition = document.createElement('div');
    contactPosition.classList.add('contact-position');
    contactPosition.innerText = position;

    const circleButtons = document.createElement('div');
    circleButtons.classList.add('circle-buttons');

    const messageButton = document.createElement('a');
    messageButton.classList.add('circle-button');
    messageButton.classList.add('message');
    messageButton.href = `sms:${phoneNumber}`;
    const messageIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    messageIcon.setAttribute('data-feather', 'message-circle');
    messageIcon.setAttribute('width', '24');
    messageIcon.setAttribute('height', '24');
    messageIcon.setAttribute('viewBox', '0 0 24 24');
    messageIcon.innerHTML = '<circle cx="12" cy="12" r="10" /><line x1="8" y1="12" x2="16" y2="12" /><line x1="8" y1="8" x2="8" y2="8" /><line x1="12" y1="8" x2="12" y2="8" /><line x1="16" y1="8" x2="16" y2="8" /><line x1="8" y1="16" x2="16" y2="16" />';
    messageButton.appendChild(messageIcon);

    const phoneButton = document.createElement('a');
    phoneButton.classList.add('circle-button');
    phoneButton.classList.add('phone');
    phoneButton.href = `tel:${phoneNumber}`;
    const phoneIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    phoneIcon.setAttribute('data-feather', 'phone');
    phoneIcon.setAttribute('width', '24');
    phoneIcon.setAttribute('height', '24');
    phoneIcon.setAttribute('viewBox', '0 0 24 24');
    phoneIcon.innerHTML = '<path d="M3 6c1.53-2.744 4.255-4.718 7.32-5.315C11.297.076 11.648 0 12 0c.352 0 .703.076 1.68.685C16.744 1.282 19.468 3.256 21 6H3zm-1 0v12h22V6H2zm12 2a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1zm-4 0a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1zm8 0a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1zm3 2h-2V8h2v2zm-4 0h-2V8h2v2zm-4 0H8V8h2v2zm-4 0H4V8h2v2zm-3 2h14a1 1 0 0 1 1 1v4H2v-4a1 1 0 0 1 1-1zm16 0h2v6h-2v-6z" />';
    phoneButton.appendChild(phoneIcon);

    circleButtons.appendChild(messageButton);
    circleButtons.appendChild(phoneButton);

    contactInfo.appendChild(contactName);
    contactInfo.appendChild(contactPosition);
    contactItem.appendChild(avatar);
    contactItem.appendChild(contactInfo);
    contactItem.appendChild(circleButtons);

    return contactItem;
  }

  // Group contacts by the first letter of their names
  function groupContactsByLetter(contacts) {
    const groups = {};

    contacts.forEach(contact => {
      const firstLetter = contact.name.charAt(0).toUpperCase();
      if (!groups[firstLetter]) {
        groups[firstLetter] = [];
      }
      groups[firstLetter].push(contact);
    });

    return groups;
  }

  function initializeContacts() {
    const contacts = [
        { name: 'Alphonsa', phoneNumber: '519-694-8450', position: 'Barista' },
        { name: 'Bethanie', phoneNumber: '226-377-8177', position: 'Barista' },
        { name: 'Cali', phoneNumber: '519-671-7736', position: 'Barista' },
        { name: 'Carlin', phoneNumber: '519-859-2355', position: 'Barista' },
        { name: 'Cynthia', phoneNumber: '226-504-7443', position: 'Barista' },
        { name: 'David', phoneNumber: '519-200-1227', position: 'Shift Supervisor' },
        { name: 'Deepanshi', phoneNumber: '519-701-0850', position: 'Barista' },
        { name: 'Emma D', phoneNumber: '519-532-8140', position: 'Barista' },
        { name: 'Emma H', phoneNumber: '226-376-3174', position: 'Shift Supervisor' },
        { name: 'Erin', phoneNumber: '519-851-2909', position: 'Store Manager' },
        { name: 'Fatima', phoneNumber: '226-504-7827', position: 'Barista' },
        { name: 'Jacob', phoneNumber: '1-647-923-7579', position: 'Barista' },
        { name: 'Jaison', phoneNumber: '519-697-9754', position: 'Barista' },
        { name: 'Jess', phoneNumber: '519-641-9150', position: 'Barista' },
        { name: 'Julissa', phoneNumber: '226-268-3842', position: 'Shift Supervisor' },
        { name: 'Kai', phoneNumber: '226-984-1761', position: 'Barista' },
        { name: 'Kaila', phoneNumber: '519-878-1039', position: 'Shift Supervisor' },
        { name: 'Kristen', phoneNumber: '226-899-6241', position: 'Barista' },
        { name: 'Madison', phoneNumber: '226-234-1085', position: 'Shift Supervisor' },
        { name: 'Mae', phoneNumber: '226-700-8718', position: 'Barista' },
        { name: 'Sara', phoneNumber: '1-416-276-2382', position: 'Shift Supervisor' },
        { name: 'Sean', phoneNumber: '1-905-699-9287', position: 'Shift Supervisor' },
        { name: 'Shabnam', phoneNumber: '1-437-679-4456', position: 'Barista' },
        { name: 'Shyan', phoneNumber: '226-927-5383', position: 'Barista' },
        { name: 'Steph', phoneNumber: '226-268-1704', position: 'Barista' }
    ];

      contacts.sort((a, b) => a.name.localeCompare(b.name));

    const groupedContacts = groupContactsByLetter(contacts);
    const contactList = document.getElementById('contact-list');

    for (const letter in groupedContacts) {
      const section = document.createElement('div');
      section.classList.add('contact-section');

      const heading = document.createElement('div');
      heading.classList.add('contact-section-heading');
      heading.innerText = letter;

      const contacts = groupedContacts[letter];

      contacts.forEach(contact => {
        const contactItem = createContactItem(contact.name, contact.phoneNumber, contact.position);
        section.appendChild(contactItem);
      });

      section.insertBefore(heading, section.firstChild);
      contactList.appendChild(section);
    }

    feather.replace();
  }

  document.addEventListener('DOMContentLoaded', initializeContacts);

  // Custom popup
  function showCustomPopup() {
    const popup = document.createElement('div');
    popup.classList.add('custom-popup');

    const content = document.createElement('div');
    content.classList.add('custom-popup-content');
    content.innerText = 'Add to your Home Screen';
    content.style.display = 'flex';
    content.style.alignItems = 'center';
    content.style.justifyContent = 'center';
    content.style.height = '100%';

    const closeButton = document.createElement('i');
    closeButton.classList.add('material-icons');
    closeButton.classList.add('custom-popup-button');
    closeButton.innerText = 'close';
    closeButton.style.cursor = 'pointer';
    closeButton.style.display = 'flex';
    closeButton.style.alignItems = 'center';
    closeButton.style.justifyContent = 'center';
    closeButton.style.width = '20px';
    closeButton.style.height = '20px';
    closeButton.style.borderRadius = '50%';
    closeButton.style.background = '#006241';
    closeButton.style.color = '#fff';
    closeButton.style.fontSize = '16px';
    closeButton.style.padding = '5px';
    closeButton.addEventListener('click', () => {
      popup.remove();
      // Store a flag in localStorage to indicate that the popup has been closed
      localStorage.setItem('customPopupShown', 'true');
    });

    content.appendChild(closeButton);
    popup.appendChild(content);
    document.body.appendChild(popup);
  }

  document.addEventListener('DOMContentLoaded', () => {
    // Check if the custom popup should be shown
    const customPopupShown = localStorage.getItem('customPopupShown');
    if (!customPopupShown) {
      showCustomPopup();
    }
  });
</script>


</head>
<body>
  <div class="app-header">
    <h1>
      <span class="title">Partners</span>
    </h1>
  </div>

  <div class="contact-list" id="contact-list"></div>

  <div class="blank-space"></div>

</body>
</html>
